<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>async/await</title>
	</head>
	<body>
		<script type="text/javascript" src="public/axios.js"></script>
		<script type="text/javascript">
			/*
			 async.await 处理异步操作
			*/
		   axios.defaults.baseURL = 'http://localhost:3000/';
		   // axios.get('adata').then(function(ret){
			  //  console.log(ret.data);
		   // })
		   
		   // async function queryData() {
			  //  var ret = await axios.get('adata');   //await 后面返回Promise实例对象
			  //  console.log(ret.data);
			  //  return ret;
		   // }
		   
		   // async function queryData() {
			  //  var ret = await new Promise(function(resolve,reject){
				 //   setTimeout(function(){
					// resolve('nihao')   
				 //   },1000)
			  //  })
			  //  return ret;
		   // }
		   // queryData().then(data=>{
			  //  console.log(data)
		   // });
		   
		   /*
		   async/await处理多个异步请求
		   */
		  async function queryData() {
			   var info = await axios.get('async1');   
			   var ret = await axios.get('async2?info=' + info.data); 
			   return ret.data;
		  }
		  queryData().then(data=>{
			   console.log(data)
			  });
		</script>
	</body>
</html>
